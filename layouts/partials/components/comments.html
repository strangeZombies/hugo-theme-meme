{{ if and (.Params.comments | default .Site.Params.enableComments) (eq hugo.Environment "production") }}
{{ if or (in .Site.Params.mainSections .Section) .Params.comments }}
{{ if not .Site.Params.autoLoadComments }}
<div class="load-comments">
    <div id="load-comments">{{ i18n "loadComments" }}</div>
</div>
{{ end }}

{{ if .Site.Params.enableWaline }}
{{ partial "third-party/waline-css.html" . }}
<h3 class="comment-h3">发表评论</h3>
<div id="waline"></div>
<style>
    .wl-gif-popup,.wl-meta-head {
    display: none;
    }
    .comment-h3 {
        font-family: "glyph-correction","EB Garamond","KaiTi","Kaiti SC","BiauKai","Georgia","Times New Roman","Times",serif;}
</style>
<script type="module">
    import { init } from 'https://npm.elemecdn.com/@waline/client@v2/dist/waline.mjs';

    init({
        el: '#waline',
        lang: 'zh-CN',
        reaction: false, // 开启反应
        serverURL: 'https://waline.takami.cyou',
        dark: 'body.light',
        copyright: true,
        search: false,
        imageUploader: false, //关闭插入图片
        // 设置 emoji 为贴吧与哔哩哔哩
        emoji: [
            'https://npm.elemecdn.com/@waline/emojis@1.2.0/tieba',
            'https://npm.elemecdn.com/@waline/emojis@1.2.0/bilibili',
        ],
    });
</script>
{{ end }}

{{ if .Site.Params.enableDisqus }}
<div id="disqus_thread"></div>
{{ end }}

{{ if .Site.Params.enableValine }}
<div id="vcomments"></div>
{{ end }}

{{ if .Site.Params.enableUtterances }}
<div id="utterances"></div>
{{ end }}

{{ if .Site.Params.enableGitalk }}
<div id="gitalk-container"></div>
{{ end }}
{{ end }}
{{ end }}

