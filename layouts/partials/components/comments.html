{{ if and (.Params.comments | default .Site.Params.enableComments) (eq hugo.Environment "production") }}
    {{ if or (in .Site.Params.mainSections .Section) .Params.comments }}
        {{ if not .Site.Params.autoLoadComments }}
            <div class="load-comments">
                <div id="load-comments">{{ i18n "loadComments" }}</div>
            </div>
        {{  end }}

        {{ if .Site.Params.enableWaline }}
        <head>
            <link rel="stylesheet" type="text/css" href="https://unpkg.com/@waline/client@2.14.6/dist/waline.css">
            <link rel="stylesheet" type="text/css" href="https://unpkg.com/@waline/client@2.14.6/dist/waline-meta.css">
          </head>
          <body>
            <!-- ... -->
            <div id="waline"></div>
            <script type="module">
              import { init } from 'https://unpkg.com/@waline/client@v2.14.6/dist/waline.mjs';
          
              init({
                el: '#waline',
                lang: 'zh-CN',
                reaction: true, // 开启反应
                serverURL: 'https://waline.takami.cyou',
                dark: 'body.dark',
                copyright: false,
                
              // 设置 emoji 为贴吧与哔哩哔哩
              emoji: [
                '//cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tieba',
                '//cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili',
              ],
              });
            </script>
          </body>
              </script>
        {{ end }}

        {{ if .Site.Params.enableDisqus }}
            <div id="disqus_thread"></div>
        {{ end }}

        {{ if .Site.Params.enableValine }}
            <div id="vcomments"></div>
        {{ end }}

        {{ if .Site.Params.enableUtterances }}
            <div id="utterances"></div>
        {{ end }}

        {{ if .Site.Params.enableGitalk }}
            <div id="gitalk-container"></div>
        {{ end }}
    {{ end }}
{{ end }}
